## [ TOPIC ] GC가 무엇인지, 필요한 이유는 무엇인지, 동작방식에 대해 설명해주세요.

---

### GC에 대한 간략한 소개
`가비지 컬렉션` (Garbage Collection) 의 약자  <br>
JVM (자바 가상 머신) 내부에서 필요하지 않은 메모리 객체를 모아 `주기적으로 제거`하는 프로그램  <br>

    --- Stack --- | --- Heap -----
         📒 -------→ 🟡(Garbage)       
          ㄴ-------↘  🔵(Garbage)     

### 장점?
1. 한정된 메모리를 효율적으로 할당하고 해제할 수 있다
2. 개발자가 메모리 관리에 신경쓰지 않고 개발에 집중할 수 있다

### 단점?
1. 메모리가 제거되는 시점을 정확하게 알기 힘들다
2. GC의 실행 == JVM 의 실행 정지 이므로 자주 사용할 경우에는 프로그램의 실행에 차질이 생길 수 있다 (`STW`,`Stop-The-World`)

### GC의 대상이 되는 객체?
참조 되고 있는 (레퍼런스) 객체 혹은 인스턴스가 아닐 경우에 대상이 된다 <br>
대상 판단 기준을 `도달성`,`도달 능력` 이라고 한다. (reachability)

1. 있는 경우 : `Reachable` (참조할 수 있는 상태)
2. 아닐 경우 : `Unreachable` (참조할 수 없는 상태) → `GC 대상`

        ** 레퍼런스?
        - Reference 라는 단어의 의미 그대로, 참조하고 있는 객체의 주소를 말한다
        
### 객체를 제거하는 과정 (청소)
1. 메모리에 올라온 객체들의 참조 상태 (`Reachable` / `Unreachable`) 를 판별한다
    - `root space` : 객체가 연결된 여부를 찾아낸다
2. `Unreachable` 한 객체를 heap영역에서 제거한다
3. 제거 이후, 분산된 객체를 `heap의 시작 주소`로 모은다

`mark` - `sweep` - `compact`의 순서로 말할 수 있다

### 동작 원리
heap 영역은 young generation / old generation 영역으로 나뉜다

        -------------------------------- Heap 영역 ---------------------------------------
        |         Young Generation           |                 Old Generation
        |  Eden  ||  survivor1 | survivor2   |

1. 왜 나누었는가?
    - 생성되는 객체들의 대부분은 일회성 객체이다 / 금방 `Unreachable`한 상태가 된다
    - 객체의 생존 기간에 따라 메모리를 효율적으로 관리하기 위해 영역을 분리

2. young - old 영역의 기능
- 1️⃣`young generation`
   - 새로 생성된 객체에게 할당되는 메모리 영역
   - 대부분의 객체는 오래 남아서 존재하지 않고 Unreachable 상태가 되므로, young 영역에 생성되었다가 사라진다
   - 이 영역에 대한 GC를 `Minor GC` 라고 부른다
- 2️⃣`old generation`
  - `reachable`의 상태를 계속 유지하여 살아남은 객체가 복사되는 영역
  - young의 영역보다 크게 할당된다
  - 이 영역에 대한 GC를 `Major GC`,`Full GC` 라고 한다
    
2-1. young 영역의 세분화
   - 1️⃣ eden
     - `new 연산자` 의 호출로 생성된 객체가 `처음` 존재하게 되는 영역
     - GC 실행 후, 살아남은 객체는 `survivor`의 영역으로 이동
   - 2️⃣ survivor
     - 0과 1의 영역으로 구성
     - GC에서 살아남은 객체가 올 수 있는 영역
     - 두 영역 중 하나는 반드시 비어있어야 한다

    ** age?
    객체가 GC 실행 당 살아남을 때마다 그 횟수가 `age` 라는 개념으로 매겨진다
    age 값이 클수록 계속해서 살아남은 객체라는 뜻이다
    임계값에 도달할 경우 old 의 영역으로 옮겨진다
    

