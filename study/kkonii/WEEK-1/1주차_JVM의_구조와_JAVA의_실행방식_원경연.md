
### 1. JVM이란?👀
- `J`ava `v`irtual `M`achine 의 약자
- `자바 가상 머신`을 말한다

### 2. 언제 필요한가요?
- `자바 프로그램을 실행`할 때
- 바이트 코드를 `해석`하고 이를 `실행`함

### 3. 어떤 구조인가요? 
```
JAVA source (Program.java)
    |
    | ←-- JAVA compiler (javac.exe)
    ↓
Class file (Program.clss)
    ↓
-- JVM --------------------------------------
Class Loader     Execution Engine      GC   | 
      ↓                 ↓               ↓   |
      ----------- Runtime Data Area ------  |
              Method / Heap / Stack /       |
        PC register / Native Method Stack   |
      ------------------------------------- |
```

### 4. 어떻게 동작하나요?
- 1️⃣ 자바 프로그램을 실행하면, JVM은 `OS`로부터 실질적인 `메모리`를 할당받는다
- 2️⃣ `컴파일러(JAVA compiler)` : 자바 소스 코드(`.java`)를 바이트 코드(`.class`)로 컴파일하는 역할 수행
- 3️⃣ `클래스 로더(Class Loader)` : 런타임 시, JVM 영역으로 클래스를 동적으로 읽어오는(로드) 일을 수행
- 4️⃣ `런타임 데이터 영역(Runtime Data Area)` : 할당받은 실질적인 메모리를 관리하는 역할 수행
- 5️⃣ `Execution Engine(실행 엔진)` : 로딩해 온 바이트 코드를 실행 가능하도록 해석하는 역할 수행


    😶바이트 코드?
    기계가 바로 수행할 수 있는 언어보다는 가상머신이 이해할 수 있는 중간 레벨로 컴파일 된 코드
    이를 실행 엔진이 실제 JVM 내부에서 기계가 실행할 수 있는 형태로 변경해준다.

### 5. JVM 구성 요소
1️⃣ 클래스 로더
  - `로드`-`링크`-`초기화`의 순서로 로딩 수행
  - 1. 로드 : 클래스 파일을 JVM 메모리 영역에 로드
  - 2. 링크 : 사용할 클래스 파일을 검증
    - 검증 `verifying` : JVM 명세에 명시된 대로 구성되어 있는지 검증
    - 준비 `preparing` : 클래스가 필요로 하는 메모리를 할당
    - 분석 `resolving` : 클래스의 상수 풀 내의 심볼릭 레퍼런스를 `다이렉트 레퍼런스`로 변경
  - 3. 초기화 : 클래스 변수들을 초기화

2️⃣ 실행 엔진
  - 인터프리터 `Interpreter`
    - 로딩해온 바이트 코드의 `명령어를 하나씩 읽어서 해석하고 바로 실행`
    - JVM 내부의 기본 동작 방식
    - `단점` : 같은 코드도 매번 해석하고 수행해야 하므로 `속도가 느리다`

  - JIT 컴파일러 `Just-In-Time`
    - 인터프리터의 단점인 `속도의 보완`을 위해 도입된 방식
    - 반복되는 코드를 발견할 경우, 바이트 코드 전체를 `컴파일`하여 `네이티브 코드`로 변경
    - 반복되는 메서드에 대해, 컴파일된 네이티브 코드를 실행

  - 가비지 컬렉터 `GC`,`Garbage Collector`
    - `heap` 영역에서 더 이상 사용되지 않는 메모리를 자동으로 회수
    - 메모리를 실시간으로 최적화하기 때문에, 개발자의 역할을 줄여준다

3️⃣ 런타임 데이터 영역
  - 메소드 영역 `method`
    - JVM 이 처음 실행될 때 생성되는 공간
    - 런타임 상수 풀, 메서드와 필드, static 변수, 메서드의 바이트 코드(메모리 로드 시 초기화 되는 대상) 등을 보관
    - GC의 대상
  - 힙 영역 `heap`
    - 런타임 시에 동적으로 할당하여 사용하는 메모리 영역
    - `new 연산자`를 호출하여 생성된 객체와 배열의 타입을 저장
    - GC의 대상
  - PC 레지스터
    - 현재 수행 중인 JVM의 `주소`를 보관
    - `CPU 명령어`를 수행 (이에 필요한 정보를 레지스터에 저장)
  - 스택 영역 `stack`
    - 기본 자료형(primitive) 데이터를 생성할 때 저장하는 공간
    - 메서드를 호출 시 생성되는 `스레드 수행정보`를 기록하는 `프레임`을 저장
    - 메서드 정보, 지역변수, 매개변수, 연산 시 발생하는 `임시로 사용되는 데이터`를 저장
  - 네이티브 메소드 `native method`
    - 바이트 코드가 아닌 기계어로 작성된 프로그램을 실행하는 영역
    - 네이티브 코드를 위한 메모리
  
4️⃣ JNI-네이티브 메서드 인터페이스 (Native Method Interface)
  - 다른 언어로 만든 Application과 자바가 상호 작용할 수 있는 인터페이스를 제공

5️⃣ 네이티브 메서드 라이브러리 (Native Method Library)
  - 네이티브 코드(C/C++)로 작성된 라이브러리

