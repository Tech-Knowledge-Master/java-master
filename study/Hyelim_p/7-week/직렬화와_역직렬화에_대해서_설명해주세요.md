# 직렬화와 역직렬화에 대해서 설명해주세요.

## 직렬화 vs 역직렬화
* 직렬화
    메모리를 디스크에 저장하거나, 네트워크 통신에 사용하기 위한 형식으로 변환하는 것
* 역직렬화
    디스크에 저장한 데이터를 읽거나, 네트워크 통신으로 받은 데이터를 메모리에 쓸 수 있도록 변환하는 것

## 직렬화가 필요한 이유
* 개발언어가 사용하는 데이터의 메모리 구조는 값 형식 데이터와 참조 형식 데이터가 있다.<br/>
이 때 디스크에 저장하거나 통신할 때는 값 형식 데이터만 사용할 수 있다. 참조 형식 데이터는 실제 데이터 값이 아닌
힙에 할당되어있는 메모리 주소를 지닌다. 이 때 프로그램의 실행에 따라 메모리가 할당되고 해제되는 과정이 반복되며 이 주소가 달라지기 때문이다.

* 네트워크 통신의 경우도 각 pc 마다 사용하고 있는 메모리 주소가 다르기 때문에 실제 데이터 값으로 변환되는 직렬화 과정이 필요하다.

* 직렬화를 하게 되면, 각 주소 값이 가지는 데이터를 전부 끌어 모아 값 형식 데이터로 변환해준다. 데이터가 저장되거나 통신될 때는 텍스트나 바이너리 형태가 되어야한다. 이 때 직렬화가 이 과정을 수행해준다.


## 데이터 직렬화 종류
(1) CSV, XML, JSON 직렬화
* 사람이 읽을 수 있는 형태
* 저장 공간 효율성이 떨어지고, 파싱 시간이 오래걸림
* 데이터의 양이 적을 때 주로 사용함
* 최근에는 JSON 형태로 데이터 직렬화가 많음
* 모든 시스템에서 사용 가능

(2) Binary 직렬화
* 사람이 읽을 수 없는 형태
* 저장 공간을 효율적으로 사용할 수 있고, 파싱하는 시간이 빠름
* 데이터의 양이 많을 때 주로 사용함
* 모든 시스템에서 사용 가능

(3) 자바 직렬화
* 자바 시스템 간의 데이터 교환이 필요할 때 사용

## 자바 직렬화 vs 역직렬화
* 직렬화
    * 자바 언어에서 사용되는 Object 나 Data 를 다른 컴퓨터의 자바 시스템에서도 사용할 수 있도록 바이트 스트림 형태로 연속적인 데이터로 변환하는 포맷 변환 기술
    > 바이트 스트림? <br/>
     스트림은 클라이언트나 서버 간에 출발지 목적지로 입출력하기 위한 데이터가 흐르는 통로를 말함, 자바는 스트림의 기본단위를 바이트로 두고 있기 때문에, 네트워크, 데이터베이스로 전송하기 위해 최소 단위인 바이트 스트림으로 변환하여 처리한다.
    * JVM 의 힙 혹은 스택 메모리에 상주하고 있는 객체 데이터를 직렬화를 통해 바이트 형태로 변환하여 데이터베이스나 파일과 같은 외부 저장소에 저장
* 역직렬화
    * 바이트로 변환된 데이터를 원래대로 자바 시스템의 Object 또는 데이터로 변환하는 기술
    * 다른 컴퓨터에서 파일을 가져와 역직렬화를 통해 자바 객체로 변환해서 JVM 메모리에 적재


### 굳이 자바 직렬화를 사용하는 이유
1. 자바 시스템에서 개발에 최적화되어 있음
2. 자바의 레퍼런스 타입에 대해 제약 없이 외부에 내보낼 수 있음 - 자바의 컬렉션, 클래스, 인터페이스 타입들 처럼 사용자가 커스텀으로 자료형 타입을 만들어
사용하고 있는 경우, 각 데이터를 매칭시키는 별도의 파싱이 필요하다. 그러나 직렬화를 이용한다면 직렬화 기본 조건만 지키면 하드한 작업없이 바로 외부에 보낼 수 있다.
그리고 역직렬화를 통해 읽어들이면 데이터 타입이 자동으로 맞춰지기에 자바 클래스의 기능들을 곧바로 다시 이용할 수 있다.
그래서 직렬화된 문자열을 데이터베이스에 저장해두고 꺼내 쓴다.

### 자바 직렬화 단점
* 직렬화는 용량이 크다 - 객체에 저장된 값 뿐 아니라 타입 정보, 클래스의 메타 정보를 가지고 있어 용량이 크다. -> 
DB, Cache 등 외부에 저장할 때 장기간 저장하는 정보는 직렬화를 지양해야한다.
* 역직렬화는 위험하다 - 생성자 없이 인스턴스화가 가능하기 때문에
* 클래스가 Serializable 을 구현하면 직렬화된 바이트 스트림 인코딩도 하나의 공개 API -> 직렬화 구현한 클래스가 퍼지면 직렬화 형태도 영원히 지원해야함 -> 객체의 유지보수가 직렬화에 묶임
* 클래스의 캡슐화가 깨진다. - private 멤버를 무시해버린다. 직렬화에서 제거하려면 별도의 transient 설정이 필요

### 자바 직렬화 사용해보기
* Serializable 인터페이스 - 직렬화를 고려하여 작성한 클래스인지 판단하는 마커 인터페이스
* ObjectOutputStream 객체 직렬화 + writeObject - 스트림에 객체를 출력
* ObjectInputStream 객체 역직렬화 + readObject- 스트림으로부터 객체를 입력
  * 자바 역직렬화를 이용하면 직렬화된 외부 파일만 있으면 생성자로 객체 초기화 없이 바로 객체에 정보를 가져와 인스턴스화해 사용이 가능하다.

* 필요한 요소만 직렬화, 역직렬화 재정의가 가능하다
* Serializable 인터페이스를 구현하는 모든 직렬화된 클래스는 serialVersionUID(이하 SUID) 이라는 고유 식별번호를 부여 받는다

> 위의 글을 토대로 직렬화보단 JSON 을 이용하는 것이 권장된다.
